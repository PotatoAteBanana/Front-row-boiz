mypackages <- c("tidyverse", "readxl", "Hmisc")

for (p in mypackages){
  if (!require(p, character.only = TRUE)) {
    install.packages(p)
    library(p, character.only = TRUE)
  }
}

controls <- read_csv("C:/Users/Karee/OneDrive/Desktop/Mphil PHS/ADA module/R programming/controls.csv")
cases <- read_csv("C:/Users/Karee/OneDrive/Desktop/Mphil PHS/ADA module/R programming/cases.csv", col_names = FALSE)

names(cases) <- names(controls)

#pop_7117 <- bind_rows(cases, controls) -- Won't merge
pop_7117 <- rbind(cases, controls) #turns menop into a char, so you cant sum

pop_7117

pop_0417 <- read_csv("C:/Users/Karee/OneDrive/Desktop/Mphil PHS/ADA module/R programming/pop_ea_200417.csv")

count(cases, menop)

#cases <- mutate(cases, menop = as.numeric(menop)) # wont work as there is some Y and N
cases <- mutate(cases, menop = case_when(menop=="N" ~"1", #IN mathematical sense u need double equal
                                          menop=="Y" ~"2",
                                          TRUE ~menop), #KEEP EVERYTHING ELSE SAME, THIS LINE ALWAYS THERE
                menop = as.numeric(menop))

count(cases, menop)
count(controls, menop)
count(cases, menop) > count(controls, menop)

controls <- mutate(controls, fa = pufa + sfa,
                   log_fa = log(fa))

controls <- controls %>%
  rename(fatty_acids = fa)
controls  
#rename(fatty = fa) #new name = old name, weird order

#case_con <- controls %>%
  #bind_rows(cases)
  #mutate(fa = pufa + sfa) %>%
  #rename(fatty_acids = fa) 


controls <- controls %>%
  mutate(age_gp = cut(age, breaks = c(10, 20 , 30 , 40, 50, 60 ,80, Inf),
                      labels = FALSE,
                      right = FALSE))

table(controls$age, controls$age_gp)
count(controls,age, age_gp)
